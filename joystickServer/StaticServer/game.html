<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body onload="startGame()" scroll="no" style="overflow: hidden">
<script>

var input

function startGame() {
    document.body.addEventListener("touchstart", handleStart, false);
    document.body.addEventListener("touchend", handleEnd, false);
    document.body.addEventListener("touchcancel", handleCancel, false);
    document.body.addEventListener("touchleave", handleEnd, false);
    document.body.addEventListener("touchmove", handleMove, false);

    // window.removeEventListener('touchstart', onFirstTouch, false);
}

touches = {'left':undefined, 'right':undefined}

function handleStart(e){
    input = 'start '

    last = e.touches.length - 1

    document.getElementById("p1").innerHTML = input + e.touches[last].clientX


    if (e.touches[last].clientX < 250){
        touches.left = e.touches[last].identifier
        document.getElementById("p2").innerHTML = 'left'
        document.getElementById("p3").innerHTML = e.touches[last].clientX
    }else{
        touches.right = e.touches[last].identifier
        document.getElementById("p4").innerHTML = 'right'
        document.getElementById("p5").innerHTML = e.touches[last].clientX
    }

    for (i = 0; i < e.touches.length; i++) { 
        touch = e.touches[i]

        if (touches.left == touch.identifier){
            document.getElementById("p2").innerHTML = 'left'
            document.getElementById("p3").innerHTML = touch.clientX
        }

        if (touches.right == touch.identifier){
            document.getElementById("p4").innerHTML = 'right'
            document.getElementById("p5").innerHTML = touch.clientX
        }
    }
}
function handleEnd(e){
    input = 'end'

    for (i = 0; i < e.changedTouches.length; i++) { 
        touch = e.changedTouches[i]

        if (touches.left == touch.identifier){
            touches.left = undefined
            document.getElementById("p2").innerHTML = 'left'
            document.getElementById("p3").innerHTML = input
        }

        if (touches.right == touch.identifier){
            touches.right = undefined
            document.getElementById("p4").innerHTML = 'right'
            document.getElementById("p5").innerHTML = input
        }
    }

    document.getElementById("p6").innerHTML = input + e.changedTouches.length
    
}

function handleMove(e){
    input = 'move'

    for (i = 0; i < e.touches.length; i++) { 
        touch = e.touches[i]

        if (touches.left == touch.identifier){
            document.getElementById("p2").innerHTML = 'left'
            document.getElementById("p3").innerHTML = touch.clientX
        }

        if (touches.right == touch.identifier){
            document.getElementById("p4").innerHTML = 'right'
            document.getElementById("p5").innerHTML = touch.clientX
        }
    }

    document.getElementById("p1").innerHTML = input
}

function handleCancel(e){
    input = 'cancel'

    for (i = 0; i < e.touches.length; i++) { 
        touch = e.touches[i]

        if (touches.left == touch.identifier){
            touches.left = undefined
            document.getElementById("p2").innerHTML = 'left'
            document.getElementById("p3").innerHTML = 'end'
            document.getElementById("p6").innerHTML = input
        }

        if (touches.right == touch.identifier){
            touches.right = undefined
            document.getElementById("p4").innerHTML = 'right'
            document.getElementById("p5").innerHTML = 'end'
            document.getElementById("p6").innerHTML = input
        }
    }
}

</script>
<br>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<p id="p6">p6</p>

<p id="p1">Hello World!</p>
<br>
<p id="p2">p2</p>
<p id="p3">p3</p>
<br>
<p id="p4">p4</p>
<p id="p5">p5</p>



<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</body>
</html>